<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[James Santucci's development blog]]></title><description><![CDATA[A starter blog demonstrating what Gatsby can do.]]></description><link>https://jisantuc.github.io</link><generator>GatsbyJS</generator><lastBuildDate>Wed, 27 Jul 2022 03:46:14 GMT</lastBuildDate><item><title><![CDATA[Packaging a Scala CLI app in 2022]]></title><description><![CDATA[In past work projects, when I‚Äôve been on a team needing a way to package a Scala application,
I‚Äôve relied on .  is great
for what it‚Äôs for‚Ä¶]]></description><link>https://jisantuc.github.io/Packaging-a-Scala-CLI-app-in-2022/Packaging-a-Scala-CLI-app-in-2022/</link><guid isPermaLink="false">https://jisantuc.github.io/Packaging-a-Scala-CLI-app-in-2022/Packaging-a-Scala-CLI-app-in-2022/</guid><pubDate>Sun, 17 Jul 2022 23:37:50 GMT</pubDate><content:encoded>&lt;p&gt;In past work projects, when I‚Äôve been on a team needing a way to package a Scala application,
I‚Äôve relied on &lt;a href=&quot;https://github.com/sbt/sbt-assembly&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;sbt-assembly&lt;/code&gt;&lt;/a&gt;. &lt;code class=&quot;language-text&quot;&gt;sbt-assembly&lt;/code&gt; is great
for what it‚Äôs for ‚Äî it bundles up dependencies and application code in a single fat
&lt;code class=&quot;language-text&quot;&gt;jar&lt;/code&gt; file, and you can run it anywhere with a Java runtime (subject to all the normal caveats
about Java versions).&lt;/p&gt;
&lt;p&gt;That‚Äôs great, but more recently, support for bundling Scala apps in other ways has flourished.
&lt;a href=&quot;https://scala-native.readthedocs.io/en/latest/#&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;scala-native&lt;/code&gt;&lt;/a&gt; targets generic POSIX environments,
&lt;a href=&quot;https://www.scala-js.org/&quot;&gt;Scala.js&lt;/a&gt; targets the browser and hit 1.0 in 2020, and GraalVM provides
an alternate Java runtime environment
&lt;a href=&quot;https://www.graalvm.org/22.1/docs/getting-started/&quot;&gt;‚Äúdesigned to accelerate the execution of applications written in [‚Ä¶] JVM languages.‚Äù&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Each of those is developed enough
to have its own sbt plugin. Partly because I wanted the tool, and partly because I wanted to play
around with new application bundling options, I used GraalVM and Scala.js to bundle up a CLI
app for adding rainbow brackets to streaming input.&lt;/p&gt;
&lt;h2&gt;Rainbow brackets&lt;/h2&gt;
&lt;p&gt;Rainbow brackets are great. No one has ever looked at an editor with a rainbow bracket plugin enabled and said
‚Äúyou know what, too much syntactical info in the bracket colors for me.‚Äù However! Not everyone has access to rainbow
brackets everywhere they could. You while Looking at Source Code probably feels an ineffable unease when looking
at monochrome source code. You while Looking at Logs and Waxing Inexplicably French is probably like
‚Äúehhhh it‚Äôs an inscrutable mass, que sera sera.‚Äù&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/a9ce71d604b203db765cbbf16c6d6eea/8bf8a/log-output.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 48.734177215189874%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACbUlEQVQozwFiAp39APv6+f78/Pv8/f39/f7+/vz8/P7//vv7+/v7+/////7+/v////7+/v39/f////////7+/v7+///9+9Lk+wDh4uLr7OvJzdDm6OnZ2dj6+vrf3tn8/Pzg2t7i4eHf39/o6Onj4+Py8vLg39/g4OD9/fzl5ufr6+ze3NsAgXB7a1Rkc1xsmJidfH6CgYGFkZKUkJCWdXV7hoiLpaWpnZ6hlpaVn5+fiYqKUlNTh4eHfn19YWFeWlpaAFg+TioEHkYjPWNgZj8+RCwrMVlaX0JETxkeKDxBSWNja0tMUkREQ0BAQENDRAAAADM0NT09PB0ZEBwbGwDBvL+8tLrFv8TU1NXKysrNzc7Y2NnKzM26u7zFxcfe3t7T09HR0tHp6enNzMq3trTNzcy7u7yurq2tra0ANTc3ISIhISIhXF1dNzcyGxoZOjo6TExNICAgIyMjUFBOHRwXBgUDYGBgWFVQUU1Hbm1sWlxeMjM0MTExAH19fWNjZFxcXYOFhHFwaFxbWm9vb4GChGJjZG9wcYSEgkpJRTk4N4eHh3d3dWtra46Mimxta7Ozs+Dg4AC/wMC6u7u9vr/Ozc65vb2tsrLBwcG+vr6xrqq1s7DNzs3V2NXS1dLS0tLe3d3n5+bq6unW19igoaWipKgAOzs2Hh4eFxYWU1hYDT09AA8PJyYnW1hQRjkdRzwoWFtXIS4hICsfEA8Qc3N05OPk2tvbwsLEHhgfDg4WALKyr6ioqK2srLm8vJurrJ2mprKzs7y8u7Cwrbm3tMjHx7i4ucHBwcHAwNPT09/f4O7u7+bm6J+eo6KhplbwYHA6y8fhAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;what is this garbage&quot;
        title=&quot;what is this garbage&quot;
        src=&quot;/static/a9ce71d604b203db765cbbf16c6d6eea/f058b/log-output.png&quot;
        srcset=&quot;/static/a9ce71d604b203db765cbbf16c6d6eea/c26ae/log-output.png 158w,
/static/a9ce71d604b203db765cbbf16c6d6eea/6bdcf/log-output.png 315w,
/static/a9ce71d604b203db765cbbf16c6d6eea/f058b/log-output.png 630w,
/static/a9ce71d604b203db765cbbf16c6d6eea/40601/log-output.png 945w,
/static/a9ce71d604b203db765cbbf16c6d6eea/78612/log-output.png 1260w,
/static/a9ce71d604b203db765cbbf16c6d6eea/8bf8a/log-output.png 1901w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;But there‚Äôs another way! It turns out matching parentheses problems are not very difficult puzzles.
If you desire in your heart of hearts to have special colors for brackets, parentheses, and braces that
happen to complete each other‚Ä¶ you don‚Äôt need to suffer in vain, or something.&lt;/p&gt;
&lt;h2&gt;The code&lt;/h2&gt;
&lt;p&gt;Algorithmically, the CLI is &lt;em&gt;really simple&lt;/em&gt;. For some streaming input, if you see a character that opens a
pair like &lt;code class=&quot;language-text&quot;&gt;[&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;(&lt;/code&gt;, or &lt;code class=&quot;language-text&quot;&gt;{&lt;/code&gt;, rewrite it to a special colorized version of that same character and push to a stack.
If you see a character that closes a pair like &lt;code class=&quot;language-text&quot;&gt;]&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;)&lt;/code&gt;, or &lt;code class=&quot;language-text&quot;&gt;}&lt;/code&gt;, rewrite it to a special colorized version of that
same character and pop off a stack.&lt;/p&gt;
&lt;p&gt;We have a few fancy options here. I was inspired by Michael Pilquist‚Äôs &lt;a href=&quot;https://github.com/scodec/hexdump4s&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;hexdump4s&lt;/code&gt;&lt;/a&gt;
and got excited about functional abstractions and &lt;em&gt;doing the right thing&lt;/em&gt;‚Ñ¢Ô∏è. I wanted to model the state of the parentheses
counter using either a &lt;code class=&quot;language-text&quot;&gt;Ref&lt;/code&gt; or a &lt;code class=&quot;language-text&quot;&gt;StateT[Stream[F, *], Color, *]&lt;/code&gt;. Fancy values! It turns out I didn‚Äôt need fancy values.
I enthusiastically stole the &lt;a href=&quot;https://github.com/scodec/hexdump4s/blob/89271648d5d3d325557562df15c32ad6609a8f2b/hexdump4s.scala#L20-L43&quot;&gt;‚Äúfile path or stdin‚Äù handling from &lt;code class=&quot;language-text&quot;&gt;hexdump4s&lt;/code&gt;&lt;/a&gt;, then tracked the state of the color wheel
using a very unsafe, privately immutable &lt;a href=&quot;https://github.com/jisantuc/rb-paren-cli/blob/v0.0.1/src/main/scala/io/github/jisantuc/rbparencli/Ring.scala&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;Ring&lt;/code&gt;&lt;/a&gt;
&lt;code class=&quot;language-text&quot;&gt;trait&lt;/code&gt;. It tracks a collection of values with size &lt;code class=&quot;language-text&quot;&gt;n&lt;/code&gt; against an index modulo an internal counter.&lt;/p&gt;
&lt;p&gt;With the &lt;code class=&quot;language-text&quot;&gt;Ring&lt;/code&gt; in hand, it was pretty straightforward to handle the rest. &lt;a href=&quot;https://github.com/bkirwi/decline&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;decline&lt;/code&gt;&lt;/a&gt; is wonderful
for config / command line argument parsing, &lt;a href=&quot;https://github.com/typelevel/fs2&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;fs2&lt;/code&gt;&lt;/a&gt; is the GOAT for constant memory IO,
and &lt;a href=&quot;https://github.com/typelevel/cats-parse&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;cats-parse&lt;/code&gt;&lt;/a&gt; is simple and nice for defining shapes of custom string formats
on the fly. The &lt;code class=&quot;language-text&quot;&gt;decline&lt;/code&gt; + &lt;code class=&quot;language-text&quot;&gt;cats-parse&lt;/code&gt; combo was great for defining the shapes of my color arguments. Since CLIs have to deal with horrible string formats all the time, it was great to be able to concissely represent the rules for &lt;em&gt;good&lt;/em&gt; strings and hook that into argument parsing.
Note that once we‚Äôre in application logic, everything is purely in domain types ‚Äî
the function responsible for transforming input is &lt;a href=&quot;https://github.com/jisantuc/rb-paren-cli/blob/v0.0.1/src/main/scala/io/github/jisantuc/rbparencli/Main.scala#L21-L39&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;colorize&lt;/code&gt;&lt;/a&gt;, and it knows nothing of effects or streaming or arguments, just ‚Äúif you can give me a palette
and a character, I can color that character.‚Äù&lt;/p&gt;
&lt;p&gt;The end result looks like this:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 472px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/f6f6352f508b161f5c610424aede82c1/3c5de/rainbow-parens.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 11.39240506329114%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAA7CAAAOwgEVKEqAAAAAcklEQVQI102I7QqCMAAAff+HG0opOQ2d23St/IBmP1pw0SDwx3HHZbrPaRrBtRUYlbN6yeJrRlPibMVzbrmNVXqLl7y2jvUumUxJ3xVodcIO5+SHu5BtXmC9YnI1YS6Iu+azD7yDSv4RgyKGIfF/R+Khv15MlGpdZ+DKAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Colored log output, with matching parentheses, brackets, and braces colored&quot;
        title=&quot;Colored log output, with matching parentheses, brackets, and braces colored&quot;
        src=&quot;/static/f6f6352f508b161f5c610424aede82c1/3c5de/rainbow-parens.png&quot;
        srcset=&quot;/static/f6f6352f508b161f5c610424aede82c1/c26ae/rainbow-parens.png 158w,
/static/f6f6352f508b161f5c610424aede82c1/6bdcf/rainbow-parens.png 315w,
/static/f6f6352f508b161f5c610424aede82c1/3c5de/rainbow-parens.png 472w&quot;
        sizes=&quot;(max-width: 472px) 100vw, 472px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;So that‚Äôs the pinnacle of side project completion ‚Äî &lt;em&gt;it runs on my machine for toy inputs&lt;/em&gt;.&lt;/p&gt;
&lt;h2&gt;Bundling for linux&lt;/h2&gt;
&lt;p&gt;But there are &lt;em&gt;other&lt;/em&gt; machines [citation needed], and it‚Äôs possible that someone who doesn‚Äôt want to learn
how to use &lt;code class=&quot;language-text&quot;&gt;sbt&lt;/code&gt; might want rainbow brackets for their log output. No one has asked me for this, but it‚Äôs technically
possible.&lt;/p&gt;
&lt;p&gt;I used &lt;a href=&quot;https://github.com/sbt/sbt-native-packager&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;sbt-native-packager&lt;/code&gt;&lt;/a&gt; as the packaging plugin, but instead
of following the GraalVM JVM setup guides, I fired up a &lt;code class=&quot;language-text&quot;&gt;nix repl&lt;/code&gt;, loaded up &lt;code class=&quot;language-text&quot;&gt;nixpkgs&lt;/code&gt;, crossed my fingers,
and pressed &lt;code class=&quot;language-text&quot;&gt;&amp;lt;TAB&gt;&lt;/code&gt; a few times after typing &lt;code class=&quot;language-text&quot;&gt;graal&lt;/code&gt;. There was a package available (&lt;code class=&quot;language-text&quot;&gt;graalvm-11-ce&lt;/code&gt;) so I added it to &lt;code class=&quot;language-text&quot;&gt;flake.nix&lt;/code&gt;,
, and gave packaging the app up a try.&lt;/p&gt;
&lt;p&gt;Cross-project configuration for packaging the app was embarrassingly easy:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;scala&quot;&gt;&lt;pre class=&quot;language-scala&quot;&gt;&lt;code class=&quot;language-scala&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;lazy&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; rootJVM &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; root&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;jvm
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;settings&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    graalVMNativeImageOptions &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Seq&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// prevents image creation and prints more output when bundling&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// is *waves hands* incomplete&lt;/span&gt;
      &lt;span class=&quot;token string&quot;&gt;&quot;--no-fallback&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// creates basically a fat jar instead of a binary that requires&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// path / classpath information to execute&lt;/span&gt;
      &lt;span class=&quot;token string&quot;&gt;&quot;--static&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// provides nicer logging output when exceptions are encountered&lt;/span&gt;
      &lt;span class=&quot;token string&quot;&gt;&quot;-H:+ReportExceptionStackTraces&quot;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    GraalVMNativeImage &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; name &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;rainbow-parens&quot;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;enablePlugins&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;GraalVMNativeImagePlugin&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code class=&quot;language-text&quot;&gt;--static&lt;/code&gt; option was really important; it was the difference between being able to run the
CLI if I copied it somewhere else on my machine and not being able to run it. However, that‚Äôs‚Ä¶
not very many options to specify. If I compare it to common &lt;code class=&quot;language-text&quot;&gt;sbt-assembly&lt;/code&gt; options at least,
it‚Äôs &lt;a href=&quot;https://github.com/raster-foundry/raster-foundry/blob/1.70.1/build.sbt#L126-L136&quot;&gt;fewer lines and less cryptic&lt;/a&gt;
than what I‚Äôve wound up with working on other projects.&lt;/p&gt;
&lt;h2&gt;Bundling for MacOS&lt;/h2&gt;
&lt;p&gt;MacOS is very special and required special handling. &lt;a href=&quot;https://www.graalvm.org/22.1/docs/getting-started/macos/&quot;&gt;In principle&lt;/a&gt;
it should be possible to set up GraalVM packaging on MacOS, but I don‚Äôt really know anything
about GraalVM or MacOS, so‚Ä¶&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://media.giphy.com/media/xDQ3Oql1BN54c/giphy.gif&quot; alt=&quot;A very good dog floating around a space station&quot;&gt;&lt;/p&gt;
&lt;p&gt;But there‚Äôs another option! &lt;code class=&quot;language-text&quot;&gt;Scala.js&lt;/code&gt; cross-project setups are pretty well ironed out, and all of my dependencies
are cross-published for &lt;code class=&quot;language-text&quot;&gt;Scala.js&lt;/code&gt;, so here‚Äôs all I had to do to bundle up a nice &lt;code class=&quot;language-text&quot;&gt;node.js&lt;/code&gt; script:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;scala&quot;&gt;&lt;pre class=&quot;language-scala&quot;&gt;&lt;code class=&quot;language-scala&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;lazy&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; root &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;crossProject&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;JSPlatform&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; JVMPlatform&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;crossType&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;CrossType&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Pure&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; in file&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;settings&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;settings&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; _&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;jsSettings&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      scalaJSUseMainModuleInitializer &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      scalaJSLinkerConfig &lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; _&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;withModuleKind&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ModuleKind&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CommonJSModule&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      Compile &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; fullOptJS &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; artifactPath &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; baseDirectory&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;rainbow-parens.js&quot;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;MacOS users have a little more work to do to make sure they can use &lt;code class=&quot;language-text&quot;&gt;rainbow-parens&lt;/code&gt; as a CLI,
but &lt;a href=&quot;https://github.com/jisantuc/rb-paren-cli#nodejs-script&quot;&gt;not much more work&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Release and publication&lt;/h2&gt;
&lt;p&gt;Because Node.js is basically universal, I didn‚Äôt have to split the release workflow. Also,
because I have a &lt;code class=&quot;language-text&quot;&gt;nix&lt;/code&gt; shell available, I don‚Äôt have to do much in terms of dependency setup in CI ‚Äî
instead I can set up &lt;code class=&quot;language-text&quot;&gt;nix&lt;/code&gt; and let it handle making sure I have everything I need.
The bundling step &lt;a href=&quot;https://github.com/jisantuc/rb-paren-cli/blob/main/.github/workflows/release.yml#L18-L25&quot;&gt;invokes &lt;code class=&quot;language-text&quot;&gt;sbt&lt;/code&gt; commands in a &lt;code class=&quot;language-text&quot;&gt;nix&lt;/code&gt; shell&lt;/a&gt;
then points a &lt;a href=&quot;https://github.com/ncipollo/release-action&quot;&gt;release action&lt;/a&gt; at the artifacts.
And we‚Äôre done!&lt;/p&gt;
&lt;p&gt;This experiment was also a bit inspired by @hillelogram‚Äôs &lt;a href=&quot;https://twitter.com/hillelogram/status/1514352882807721984&quot;&gt;mise en place&lt;/a&gt; ‚Äî
the application here is &lt;em&gt;really simple&lt;/em&gt;, so it was fine to take a little more technical risk with the release
tooling. And it worked really well! ‚ÄúAlways mise en place‚Äù is a good kitchen rule, and it
turns out to work well for taking risk out of future technical choices too.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[cliffs, a small CLI for remembering what your scripts to rule them all are for]]></title><description><![CDATA[Project I‚Äôve worked on at Azavea really frequently use the Scripts to Rule Them
All (STRTA) pattern. Using STRTA is great once everyone is‚Ä¶]]></description><link>https://jisantuc.github.io/cliffs,-a-small-CLI-for-remembering-what-your-scripts-to-rule-them-all-are-for/cliffs,-a-small-CLI-for-remembering-what-your-scripts-to-rule-them-all-are-for/</link><guid isPermaLink="false">https://jisantuc.github.io/cliffs,-a-small-CLI-for-remembering-what-your-scripts-to-rule-them-all-are-for/cliffs,-a-small-CLI-for-remembering-what-your-scripts-to-rule-them-all-are-for/</guid><pubDate>Tue, 23 Nov 2021 04:11:52 GMT</pubDate><content:encoded>&lt;p&gt;Project I‚Äôve worked on at Azavea really frequently use the &lt;a href=&quot;https://github.blog/2015-06-30-scripts-to-rule-them-all/&quot;&gt;Scripts to Rule Them
All&lt;/a&gt; (STRTA) pattern. Using STRTA is great once everyone is really used to what
all of the scripts are for ‚Äî provided no one has done anything weird, it‚Äôs much
easier to get spun up in a new project with &lt;code class=&quot;language-text&quot;&gt;scripts/setup&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;scripts/update&lt;/code&gt;
than with a bunch of bespoke, one-off commands relying on whatever each project
is calling a ‚Äúbuild tool.‚Äù&lt;/p&gt;
&lt;p&gt;However, a few weeks ago, someone pointed out that while that‚Äôs nice for
everyone who is used to STRTA, if the scripts reach a point where no one can
remember well enough the differences between &lt;code class=&quot;language-text&quot;&gt;setup&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;bootstrap&lt;/code&gt;, and &lt;code class=&quot;language-text&quot;&gt;update&lt;/code&gt;,
the scripts can get in the way. You can of course run &lt;code class=&quot;language-text&quot;&gt;./scripts/setup --help&lt;/code&gt;,
&lt;code class=&quot;language-text&quot;&gt;./scripts/bootstrap --help&lt;/code&gt;, and &lt;code class=&quot;language-text&quot;&gt;./scripts/update --help&lt;/code&gt; provided your
friendly colleagues remembered to include a &lt;code class=&quot;language-text&quot;&gt;--help&lt;/code&gt; option, but that ends up
being a lot of typing to do every time.&lt;/p&gt;
&lt;p&gt;Also, over time, the list of available scripts tends to grow much more often
than it shrinks. That‚Äôs how in Raster Foundry we wound up with &lt;a href=&quot;https://github.com/raster-foundry/raster-foundry/tree/develop/scripts&quot;&gt;sixteen
scripts&lt;/a&gt;, most of them non-standard. Some of them aren‚Äôt even useful / don‚Äôt
even work anymore!&lt;/p&gt;
&lt;p&gt;Something I noticed a bit ago is that some of our projects
also have nice tables describing the scripts. I thought: can you use
semi-structured READMEs (a bunch of markdown text with a table with special
column names) and semi-structured scripts (executable text files that ü§ûüèª print
helpful information when called with &lt;code class=&quot;language-text&quot;&gt;--help&lt;/code&gt;) to show information about what
scripts are for in a single interactive location?&lt;/p&gt;
&lt;p&gt;It turns out you can!&lt;/p&gt;
&lt;p&gt;Then an attentive and conscientious human could use that information never to be
confused about what scripts are for and to have an up-to-date view of all the
scripts that are still around.&lt;/p&gt;
&lt;p&gt;I think I probably poisoned my brain and I‚Äôm now seeing every problem as a
terminal UI problem, but I think it was worth it to learn a fun new tool.&lt;/p&gt;
&lt;h2&gt;&lt;code class=&quot;language-text&quot;&gt;cliffs&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/jisantuc/cliffs&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;cliffs&lt;/code&gt;&lt;/a&gt; is a small CLI that does very little, but the little it does is
pretty useful. If you have a README with specially named columns and a scripts
directory named &lt;code class=&quot;language-text&quot;&gt;scripts&lt;/code&gt;, running &lt;code class=&quot;language-text&quot;&gt;cliffs&lt;/code&gt; will get you a nice little
interactive session for exploring what each thing does:&lt;/p&gt;
&lt;p&gt;
        &lt;div class=&quot;embedVideo-container&quot;&gt;
            &lt;iframe
              title=&quot;&quot;
              width=&quot;560&quot;
              height=&quot;316&quot;
              src=&quot;https://www.youtube.com/embed/8DwItA-1YnU?rel=0&quot;
              class=&quot;embedVideo-iframe&quot;
              style=&quot;border:0&quot;
              
              loading=&quot;eager&quot;
              allowfullscreen
	      sandbox=&quot;allow-same-origin allow-scripts allow-popups&quot;
            &gt;&lt;/iframe&gt;
        &lt;/div&gt;&lt;/p&gt;
&lt;p&gt;In short:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;run &lt;code class=&quot;language-text&quot;&gt;cliffs&lt;/code&gt; in a directory containing a README.md file and a &lt;code class=&quot;language-text&quot;&gt;scripts/&lt;/code&gt;
directory&lt;/li&gt;
&lt;li&gt;‚¨ÜÔ∏è/‚¨áÔ∏è to preview the &lt;code class=&quot;language-text&quot;&gt;--help&lt;/code&gt; text for a script&lt;/li&gt;
&lt;li&gt;or you can just look at descriptions if they‚Äôre sufficient&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I think you could use &lt;code class=&quot;language-text&quot;&gt;cliffs&lt;/code&gt; either to help you find out what scripts are for
if you‚Äôve forgotten or to audit your scripts to make sure they all understand
what the &lt;code class=&quot;language-text&quot;&gt;--help&lt;/code&gt; flag does. While frameworks like Python‚Äôs &lt;code class=&quot;language-text&quot;&gt;click&lt;/code&gt; or &lt;code class=&quot;language-text&quot;&gt;oclif&lt;/code&gt;
in Node.js will handle &lt;code class=&quot;language-text&quot;&gt;--help&lt;/code&gt; for you, if you‚Äôre hand-rolling bash scripts,
it‚Äôs much easier to forget. &lt;/p&gt;
&lt;p&gt;You can install cliffs with &lt;a href=&quot;https://nixos.org/download.html&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;nix&lt;/code&gt;&lt;/a&gt; as:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;nix-env -i -f https://github.com/jisantuc/cliffs/archive/refs/tags/v0.0.1.zip&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Someday there will be a container image, but I don‚Äôt actually know how to turn
my &lt;code class=&quot;language-text&quot;&gt;default.nix&lt;/code&gt; into a container yet ü§∑üèª‚Äç‚ôÇÔ∏è.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;cliffs&lt;/code&gt; is built on‚Ä¶&lt;/p&gt;
&lt;h3&gt;&lt;a href=&quot;https://github.com/jtdaugherty/brick&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;brick&lt;/code&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/jtdaugherty/brick&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;brick&lt;/code&gt;&lt;/a&gt; handles the terminal UI interactions. &lt;code class=&quot;language-text&quot;&gt;brick&lt;/code&gt; was a delight to get
started with and felt like writing &lt;a href=&quot;https://guide.elm-lang.org/architecture/&quot;&gt;The Elm Architecture&lt;/a&gt; for a terminal
program. As someone whose brain breaks every time I have to think about frontend
layout, getting live in a land of pure functions from state to UI was really
nice. Also, the &lt;a href=&quot;https://github.com/jtdaugherty/brick/tree/master/programs&quot;&gt;examples directory&lt;/a&gt; was really effective as documentation.&lt;/p&gt;
&lt;h3&gt;&lt;a href=&quot;https://hackage.haskell.org/package/cmark-gfm-0.2.2&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;cmark-gfm&lt;/code&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://hackage.haskell.org/package/cmark-gfm-0.2.2&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;cmark-gfm&lt;/code&gt;&lt;/a&gt; stands for ‚ÄúCommonMark GitHub-flavored markdown‚Äù. It‚Äôs the library
responsible for turning raw text into something with some structure. It‚Äôs
oriented around nodes and their children, which means for any sort of search for
a specific kind of element, we just have to walk a tree and find a node matching
some predicate. It claims to be &lt;em&gt;very fast&lt;/em&gt;, which is nice, but didn‚Äôt really
come up for the READMEs I tested on. If you can describe in words the
relationships between the things you‚Äôre looking for ‚Äî e.g. ‚Äúthe text in the
second column of the row‚Äù ‚Äî it‚Äôs not super difficult to guess the relationships
between nodes that you end up with after parsing with &lt;code class=&quot;language-text&quot;&gt;cmark-gfm&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;A surprising bonus is that parsing &lt;a href=&quot;https://hackage.haskell.org/package/cmark-gfm-0.2.2/docs/CMarkGFM.html#v:commonmarkToNode&quot;&gt;&lt;em&gt;can‚Äôt fail&lt;/em&gt;&lt;/a&gt; ‚Äî note that the return type
for &lt;code class=&quot;language-text&quot;&gt;commonmarkToNode&lt;/code&gt; doesn‚Äôt return an &lt;code class=&quot;language-text&quot;&gt;Either&lt;/code&gt; or &lt;code class=&quot;language-text&quot;&gt;Option&lt;/code&gt; or &lt;code class=&quot;language-text&quot;&gt;IO&lt;/code&gt; of &lt;code class=&quot;language-text&quot;&gt;Node&lt;/code&gt;,
just a &lt;code class=&quot;language-text&quot;&gt;Node&lt;/code&gt;. I hadn‚Äôt considered this before, but the reason for this is that
there‚Äôs no such thing as an invalid CommonMark document ‚Äî the &lt;a href=&quot;https://spec.commonmark.org/0.30/#why-is-a-spec-needed-&quot;&gt;CommonMark spec&lt;/a&gt;
even notes that&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;nothing in Markdown counts as a ‚Äúsyntax error‚Äù&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I hadn‚Äôt considered this previously and it was cool to learn something about
something I use almost &lt;em&gt;every day&lt;/em&gt; from the return type of a parser.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Variable roles, types, and code skimming]]></title><description><![CDATA[I‚Äôve been reading The Programmer‚Äôs Brain, since I want to be better at explaining / teaching
unfamiliar programming concepts to people who‚Ä¶]]></description><link>https://jisantuc.github.io/Variable-roles-types-and-code-skimming/Variable-roles-types-and-code-skimming/</link><guid isPermaLink="false">https://jisantuc.github.io/Variable-roles-types-and-code-skimming/Variable-roles-types-and-code-skimming/</guid><pubDate>Thu, 22 Apr 2021 15:00:00 GMT</pubDate><content:encoded>&lt;p&gt;I‚Äôve been reading &lt;a href=&quot;https://www.manning.com/books/the-programmers-brain&quot;&gt;&lt;em&gt;The Programmer‚Äôs Brain&lt;/em&gt;&lt;/a&gt;, since I want to be better at explaining / teaching
unfamiliar programming concepts to people who might want me to go away so they can get some
real work done. As someone who learned to program mostly on my own (not to program &lt;em&gt;well&lt;/em&gt;, but to
program), I was curious whether I‚Äôd recognize any of the cognitive patterns, since it‚Äôs still
pretty easy for me to remember when it was hard to open files in Python. I haven‚Äôt been disappointed
and the exercises have already re-shaped how I think about digging into unfamiliar code. I just
finished chapter 5 a few days ago.&lt;/p&gt;
&lt;p&gt;One of many concepts that was new to me was &lt;a href=&quot;https://www.tandfonline.com/doi/full/10.1080/08993400500056563&quot;&gt;&lt;em&gt;roles of variables&lt;/em&gt;&lt;/a&gt;. ‚ÄúRoles‚Äù describe what variables are &lt;em&gt;for&lt;/em&gt;(unlike simple types, which describe what variables are).
Here are some of the roles listed in &lt;em&gt;The Programmer‚Äôs Brain&lt;/em&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;most-recent holder: holds the most recent value you‚Äôve seen, e.g., while stepping through a list by index, you would put the most recent value you‚Äôve seen in one of these.&lt;/li&gt;
&lt;li&gt;most-wanted holder: holds the ‚Äúbest‚Äù value, whatever ‚Äúbest‚Äù means for you&lt;/li&gt;
&lt;li&gt;gatherer: ‚Äúa variable that collects data and aggregates it into one value‚Äù&lt;/li&gt;
&lt;li&gt;container: ‚Äúany data structure that holds multiple elements‚Äù&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I‚Äôve picked these four out in particular because of an example Felienne Hermans gives at the end of the section introducing roles:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;a program with a stepper and a most-wanted holder value is a search program&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;Mapping roles to FP concepts&lt;/h3&gt;
&lt;p&gt;Felienne Hermans mentions annotating roles of variables on printed code using some specific symbols, translated loosely into emojis here:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;most-recent holder: üìÜ&lt;/li&gt;
&lt;li&gt;most-wanted holder: üíé&lt;/li&gt;
&lt;li&gt;gatherer: üß∫&lt;/li&gt;
&lt;li&gt;container: üî≥&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This makes sense ‚Äî if you can pictorially represent the type of program you have, you can
dramatically reduce the amount of code someone has to read to get the big picture. One of my favorite PureScript
projects, &lt;a href=&quot;https://pursuit.purescript.org/packages/purescript-prelewd/0.1.0&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;prelewd&lt;/code&gt;&lt;/a&gt;, plays a similar game, asking:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Is &lt;code class=&quot;language-text&quot;&gt;f &amp;lt;$&gt; a &amp;lt;*&gt; b&lt;/code&gt; scarier than &lt;code class=&quot;language-text&quot;&gt;f üöÇ(a)üöã(b)üöã(c)&lt;/code&gt;? If so, why?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Let‚Äôs write some tiny search functions in PureScript with these emoji annotations!&lt;/p&gt;
&lt;h3&gt;A search program in PureScript&lt;/h3&gt;
&lt;p&gt;PureScript is a statically typed pure functional programming language with a Haskell-y syntax.&lt;/p&gt;
&lt;p&gt;For our search program, we‚Äôre going to find the tallest building from a list of buildings. We‚Äôre also not going
to use &lt;a href=&quot;https://pursuit.purescript.org/packages/purescript-foldable-traversable/5.0.1/docs/Data.Semigroup.Foldable#v:maximumBy&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;maximumBy&lt;/code&gt;&lt;/a&gt;, because that‚Äôs boring.&lt;/p&gt;
&lt;p&gt;Here‚Äôs out list of buildings:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;purescript&quot;&gt;&lt;pre class=&quot;language-purescript&quot;&gt;&lt;code class=&quot;language-purescript&quot;&gt;&lt;span class=&quot;token hvariable&quot;&gt;buildings&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Sears Tower&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;height&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Burj Khalifa&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;height&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1200&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Small building&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;height&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Medium building&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;height&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;50&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Non-notably tall buidling&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;height&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;200&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Unreasonably tall building&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;height&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10000&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;To find the tallest building, we‚Äôll use the &lt;a href=&quot;https://pursuit.purescript.org/packages/purescript-foldable-traversable/5.0.1/docs/Data.Foldable#v:foldl&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;foldl&lt;/code&gt;&lt;/a&gt; function. The &lt;code class=&quot;language-text&quot;&gt;foldl&lt;/code&gt; function‚Äôs type signature looks like this:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;purescript&quot;&gt;&lt;pre class=&quot;language-purescript&quot;&gt;&lt;code class=&quot;language-purescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;forall&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Foldable&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;b&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;With roles of variables, we could annotate it as:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;purescript&quot;&gt;&lt;pre class=&quot;language-purescript&quot;&gt;&lt;code class=&quot;language-purescript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;--                  üî≥   =&gt;      üß∫      -&gt;  üíé/üìÜ -&gt; üî≥ -&gt; üíé&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;forall&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Foldable&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;   &lt;span class=&quot;token hvariable&quot;&gt;b&lt;/span&gt;    &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;b&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Or: it‚Äôs a function from some stuff in a container, with a gathering function, that eventually finds a most wanted value.&lt;/p&gt;
&lt;p&gt;Let‚Äôs actually find the tallest building now:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;purescript&quot;&gt;&lt;pre class=&quot;language-purescript&quot;&gt;&lt;code class=&quot;language-purescript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Building&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token hvariable&quot;&gt;compareBuilding&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Building&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Building&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Building&lt;/span&gt;
&lt;span class=&quot;token hvariable&quot;&gt;compareBuilding&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;b1&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;b2&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;b1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;height&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;b2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;then&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;b1&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;b2&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;--                    üíé&lt;/span&gt;
&lt;span class=&quot;token hvariable&quot;&gt;tallestBuilding&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Building&lt;/span&gt;
&lt;span class=&quot;token hvariable&quot;&gt;tallestBuilding&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;foldl&lt;/span&gt;
  &lt;span class=&quot;token hvariable&quot;&gt;compareBuilding&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;-- üß∫&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;impossible building&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;-- üíé/üìÜ&lt;/span&gt;
  &lt;span class=&quot;token hvariable&quot;&gt;buildings&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;-- üî≥&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The only weird part here is the üíé/üìÜ value ‚Äî since we‚Äôre traversing the whole list, and comparing with the best value we know
at each point, our initial value starts as the ‚Äúmost recent best‚Äù value. Starting with a bogus value for our most recent best building guarantees that we can
find a tallest building even in empty lists.&lt;/p&gt;
&lt;h4&gt;Type hints for variables roles&lt;/h4&gt;
&lt;p&gt;The function above finds exactly one value, but we can vary the type of our most recent best container to get different sorts of functions.
Maybe  instead of the tallest building, we want to find the first building with a specific name. We can also write this search with &lt;code class=&quot;language-text&quot;&gt;foldl&lt;/code&gt;, but
the gathering function and initial most recent best value will be different:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;purescript&quot;&gt;&lt;pre class=&quot;language-purescript&quot;&gt;&lt;code class=&quot;language-purescript&quot;&gt;&lt;span class=&quot;token hvariable&quot;&gt;isItMedium&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Maybe&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Building&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Building&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Maybe&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Building&lt;/span&gt;
&lt;span class=&quot;token hvariable&quot;&gt;isItMedium&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;Just&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;building&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Just&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;building&lt;/span&gt;
&lt;span class=&quot;token hvariable&quot;&gt;isItMedium&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;building&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;building&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Medium building&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;then&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Just&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;building&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Nothing&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;--                 üî≥      üíé&lt;/span&gt;
&lt;span class=&quot;token hvariable&quot;&gt;mediumBuilding&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Maybe&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Building&lt;/span&gt;
&lt;span class=&quot;token hvariable&quot;&gt;mediumBuilding&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;foldl&lt;/span&gt;
  &lt;span class=&quot;token hvariable&quot;&gt;isItMedium&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;-- üß∫&lt;/span&gt;
  &lt;span class=&quot;token constant&quot;&gt;Nothing&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;-- üî≥üíé&lt;/span&gt;
  &lt;span class=&quot;token hvariable&quot;&gt;buildings&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;-- üî≥&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In this case, we‚Äôre searching for something in the list that might not be there. As a result, our most wanted value
starts out with an empty container, in this case, an empty &lt;a href=&quot;https://pursuit.purescript.org/packages/purescript-maybe/5.0.0/docs/Data.Maybe#t:Maybe&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;Maybe&lt;/code&gt;&lt;/a&gt; value. &lt;code class=&quot;language-text&quot;&gt;Maybes&lt;/code&gt; can hold &lt;em&gt;zero or one&lt;/em&gt; values.
Once &lt;code class=&quot;language-text&quot;&gt;isItMedium&lt;/code&gt; finds a building that matches, it puts that building into the &lt;code class=&quot;language-text&quot;&gt;Maybe&lt;/code&gt; container with the &lt;code class=&quot;language-text&quot;&gt;Just&lt;/code&gt;
constructor. Functions such as this one, where we model the possibility of not finding what we‚Äôre looking for are also searches.&lt;/p&gt;
&lt;p&gt;Finally, let‚Äôs assume the buildings are sorted by year of construction. We could search for buildings that were the tallest
building in the world when they were constructed:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;purescript&quot;&gt;&lt;pre class=&quot;language-purescript&quot;&gt;&lt;code class=&quot;language-purescript&quot;&gt;&lt;span class=&quot;token hvariable&quot;&gt;tallestBuildings&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Array&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Building&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Building&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Array&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Building&lt;/span&gt;
&lt;span class=&quot;token hvariable&quot;&gt;tallestBuildings&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;buildings&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;building&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;last&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;buildings&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;of&lt;/span&gt;
    &lt;span class=&quot;token constant&quot;&gt;Just&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;height&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;building&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;then&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;buildings&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;`append`&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;building&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;buildings&lt;/span&gt;
    &lt;span class=&quot;token constant&quot;&gt;Nothing&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;building&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;--                 üî≥     üíé&lt;/span&gt;
&lt;span class=&quot;token hvariable&quot;&gt;recordSetters&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Array&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Building&lt;/span&gt;
&lt;span class=&quot;token hvariable&quot;&gt;recordSetters&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;foldl&lt;/span&gt;
  &lt;span class=&quot;token hvariable&quot;&gt;tallestBuildings&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;-- üß∫&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;-- üî≥üíé&lt;/span&gt;
  &lt;span class=&quot;token hvariable&quot;&gt;buildings&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;-- üî≥&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This example is similar to the preveious one. However, the container for our most wanted value is an array, which holds
zero or any number of values, instead of zero or one like &lt;code class=&quot;language-text&quot;&gt;Maybe&lt;/code&gt;. Functions such as this one, where the best values are gathered into an unbounded container, are filters.&lt;/p&gt;
&lt;p&gt;While the types on their own wouldn‚Äôt tell us that all of these functions are searches / filters, the variable role annotations tell us that we‚Äôre always searching for a best value / values, so the implementations of &lt;code class=&quot;language-text&quot;&gt;tallestBuildings&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;isItMedium&lt;/code&gt;, and &lt;code class=&quot;language-text&quot;&gt;compareBuildings&lt;/code&gt; could be hidden and we‚Äôd still have a good sense of what these functions do.&lt;/p&gt;
&lt;h3&gt;The end&lt;/h3&gt;
&lt;p&gt;These three examples showed how the roles of variables framework, in conjunction with information represented in types,
can give you a lot of clues about how a function or program works without having to dig into the implementation. While some
of the syntax might be strange if you‚Äôre not familiar with PureScript, I hope the annotated and emojified variable roles help make clear what‚Äôs going on.&lt;/p&gt;
&lt;p&gt;Also, if you‚Äôre also interested in turning the roles of variables annotations into a VSCode extension, please tweet at me
&lt;code class=&quot;language-text&quot;&gt;@james_santucci&lt;/code&gt; ‚Äî I don‚Äôt know anything about VSCode extensions at this point, but it sounds fun.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[tiny-test, for non-production property testing games]]></title><description><![CDATA[Property testing is a testing strategy where the programmer defers the
responsibility of writing example cases to the computer. That‚Äôs most‚Ä¶]]></description><link>https://jisantuc.github.io/tiny-test-for-Non-production-Property-Testing-Games/tiny-test-for-Non-production-Property-Testing-Games/</link><guid isPermaLink="false">https://jisantuc.github.io/tiny-test-for-Non-production-Property-Testing-Games/tiny-test-for-Non-production-Property-Testing-Games/</guid><pubDate>Mon, 29 Mar 2021 21:52:01 GMT</pubDate><content:encoded>&lt;p&gt;Property testing is a testing strategy where the programmer defers the
responsibility of writing example cases to the computer. That‚Äôs most of the
game, but isn‚Äôt super useful for practice with property testing outside
of a production setting.&lt;/p&gt;
&lt;p&gt;Property
testing is an area of software development dear to my heart ‚Äî one of the first
software talks I ever saw where I thought I‚Äôd like to be a developer was on
&lt;a href=&quot;https://hypothesis.readthedocs.io/en/latest/&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;hypothesis&lt;/code&gt;&lt;/a&gt; by &lt;a href=&quot;https://www.youtube.com/watch?v=jvwfDdgg93E&quot;&gt;Matt Bachmann&lt;/a&gt;. However, I‚Äôve often
had trouble explaining the mechanics to people without hand-waving. To that end,
I created &lt;a href=&quot;https://github.com/jisantuc/tiny-test/&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;tiny-test&lt;/code&gt;&lt;/a&gt;, a testing framework
you &lt;em&gt;absolutely should not use&lt;/em&gt; in any production setting, but which is fine for playing
around.&lt;/p&gt;
&lt;p&gt;What‚Äôs the goal with &lt;code class=&quot;language-text&quot;&gt;tiny-test&lt;/code&gt;? Write a ‚Äútest framework‚Äù that illustrates the
&lt;a href=&quot;https://en.wikipedia.org/wiki/Stylized_fact&quot;&gt;stylized facts&lt;/a&gt; of property testing.&lt;/p&gt;
&lt;h2&gt;What are the stylized facts of property testing frameworks?&lt;/h2&gt;
&lt;p&gt;Property testing goes by a lot of names ‚Äî &lt;a href=&quot;https://en.wikipedia.org/wiki/Fuzzing&quot;&gt;fuzz testing&lt;/a&gt;, &lt;a href=&quot;https://medium.com/geckoboard-under-the-hood/how-generative-testing-changed-the-way-we-qa-geckoboard-b4a48a193449&quot;&gt;generative testing&lt;/a&gt;,
&lt;a href=&quot;https://en.wikipedia.org/wiki/Monkey_testing&quot;&gt;monkey testing&lt;/a&gt;‚Ä¶ there are a lot. These names collectively emphasize that the test cases
will be driven by &lt;em&gt;randomness&lt;/em&gt;, so that will be the first stylized fact:
test cases in &lt;code class=&quot;language-text&quot;&gt;tiny-test&lt;/code&gt; should be driven by randomness.&lt;/p&gt;
&lt;p&gt;Second, since &lt;code class=&quot;language-text&quot;&gt;tiny-test&lt;/code&gt; is a testing framework, it should have opinions about what
a test is. The second stylized fact is that tests are things that produce test results.
What are test results? Test results are checked expectations ‚Äî e.g., ‚ÄúI think this
should run without crashing,‚Äù or ‚ÄúI think the result should be less than six.‚Äù&lt;/p&gt;
&lt;p&gt;With these two stylized facts, there‚Äôs a pretty straightforward main requirement:
&lt;code class=&quot;language-text&quot;&gt;tiny-test&lt;/code&gt; needs to provide APIs for transforming randomness into test results. Cool! Let‚Äôs
work on that.&lt;/p&gt;
&lt;h2&gt;Useful randomness&lt;/h2&gt;
&lt;p&gt;The hello world of property testing is a custom &lt;code class=&quot;language-text&quot;&gt;add&lt;/code&gt; function that acts like the built-in
&lt;code class=&quot;language-text&quot;&gt;+&lt;/code&gt; operator.&lt;/p&gt;
&lt;p&gt;In Haskell, that would look like this:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;haskell&quot;&gt;&lt;pre class=&quot;language-haskell&quot;&gt;&lt;code class=&quot;language-haskell&quot;&gt;&lt;span class=&quot;token hvariable&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Int&lt;/span&gt;
&lt;span class=&quot;token hvariable&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;However, that‚Äôs not how &lt;code class=&quot;language-text&quot;&gt;add&lt;/code&gt; is &lt;a href=&quot;https://github.com/jisantuc/tiny-test/blob/master/src/Lib.hs&quot;&gt;implemented in &lt;code class=&quot;language-text&quot;&gt;tiny-test&lt;/code&gt;&lt;/a&gt;. How do
we explore the possible integer inputs such that we can find the values where the &lt;code class=&quot;language-text&quot;&gt;add&lt;/code&gt; implementation
is wrong?&lt;/p&gt;
&lt;h3&gt;In Python&lt;/h3&gt;
&lt;p&gt;Let‚Äôs suppose we‚Äôre working in a language where we can freely mix effectful and non-effectful code,
like python. In that case, our test might look something like:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; random

&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;test_add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; random&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;randint&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    b &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; random&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;randint&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;assert&lt;/span&gt; add&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; b&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; a &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; b&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Cool, now we can run &lt;em&gt;one test&lt;/em&gt; with two random inputs. What if we want to run &lt;em&gt;lots&lt;/em&gt; of tests?
Let‚Äôs try that instead:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;test_add_a_lot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    some_as &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;random&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;randint&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; _ &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    some_bs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;random&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;randint&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; _ &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; a&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; b &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;zip&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;some_as&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; some_bs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;assert&lt;/span&gt; add&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; b&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; a &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; b&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Nice, now we‚Äôve run &lt;em&gt;lots of tests&lt;/em&gt;. This is great because we didn‚Äôt have to do very much work and
we got to make sure that our &lt;code class=&quot;language-text&quot;&gt;add&lt;/code&gt; function works for lots of different int combinations, instead
of the six combinations we might come up with in a unit test.&lt;/p&gt;
&lt;p&gt;What if we want to test some property about strings?&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;some_rand_string_fn&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;# This returns a random string, I swear.&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;test_append&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    some_strings &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;some_rand_string_fn&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; _ &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; st &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; some_strings&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;assert&lt;/span&gt; st &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;st &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; st&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This pattern looks familiar ‚Äî generate a bunch of data of the type that we need,
call some function on the generated data, and assert some expectation about the result.&lt;/p&gt;
&lt;h2&gt;Properties over arbitrary functions&lt;/h2&gt;
&lt;p&gt;We saw in the Python example that it‚Äôs useful to be able to generate data of different types.
That example included only &lt;code class=&quot;language-text&quot;&gt;ints&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;strings&lt;/code&gt;, but we could conceivably want to test functions
with &lt;em&gt;any&lt;/em&gt; input type. In that case, we‚Äôd want some way to express the requirements that:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;we can generate data of the type needed&lt;/li&gt;
&lt;li&gt;we have some function on the generated data that gives us a test result&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In languages with typeclasses, we can represent some capability that we want to express like
‚Äúwe can generate data of this type‚Äù with a &lt;em&gt;typeclass&lt;/em&gt;. In property testing libraries, this capability is frequently
(&lt;a href=&quot;https://github.com/typelevel/scalacheck/blob/main/src/main/scala/org/scalacheck/Gen.scala&quot;&gt;scalacheck&lt;/a&gt;, &lt;a href=&quot;https://hackage.haskell.org/package/QuickCheck-2.14.2/docs/Test-QuickCheck-Gen.html&quot;&gt;quickcheck&lt;/a&gt;, &lt;a href=&quot;https://hackage.haskell.org/package/hedgehog-1.0.5/docs/Hedgehog-Internal-Gen.html&quot;&gt;hedgehog&lt;/a&gt;) wrapped up in a &lt;code class=&quot;language-text&quot;&gt;Gen&lt;/code&gt; type. A value of type &lt;code class=&quot;language-text&quot;&gt;Gen a&lt;/code&gt;
or &lt;code class=&quot;language-text&quot;&gt;Gen[A]&lt;/code&gt; says ‚ÄúI can generate values of type &lt;code class=&quot;language-text&quot;&gt;a&lt;/code&gt;/&lt;code class=&quot;language-text&quot;&gt;A&lt;/code&gt;.‚Äù Often, access to that generator
is hidden in an &lt;a href=&quot;https://hackage.haskell.org/package/QuickCheck-2.14.2/docs/Test-QuickCheck-Arbitrary.html&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;Arbitrary&lt;/code&gt; typeclass&lt;/a&gt;. In &lt;code class=&quot;language-text&quot;&gt;tiny-test&lt;/code&gt;, we‚Äôll make things a little simpler in
our &lt;code class=&quot;language-text&quot;&gt;Arbitrary&lt;/code&gt; typeclass,
and just say that we have a &lt;code class=&quot;language-text&quot;&gt;sample&lt;/code&gt; method that effectfully procures us a list of values
of the type we want:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;haskell&quot;&gt;&lt;pre class=&quot;language-haskell&quot;&gt;&lt;code class=&quot;language-haskell&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Arbitrary&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt;
  &lt;span class=&quot;token hvariable&quot;&gt;sample&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;IO&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The second requirement is simpler ‚Äî we said tests are things that produce test results, so let‚Äôs
summon a type called &lt;code class=&quot;language-text&quot;&gt;Result&lt;/code&gt; (the details aren‚Äôt important here) and say that we need a function
from something we can summon to a &lt;code class=&quot;language-text&quot;&gt;Result&lt;/code&gt;. In Haskell, that looks like:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;haskell&quot;&gt;&lt;pre class=&quot;language-haskell&quot;&gt;&lt;code class=&quot;language-haskell&quot;&gt;&lt;span class=&quot;token hvariable&quot;&gt;prop&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Arbitrary&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Result&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;IO&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Result&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Provided you know how to summon values of type &lt;code class=&quot;language-text&quot;&gt;a&lt;/code&gt;, we have a function that we can use to
run lots of tests. Let‚Äôs assume that &lt;code class=&quot;language-text&quot;&gt;Results&lt;/code&gt; can be combined ‚Äî in that case, we can smash
all of our results in the implementation with:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;haskell&quot;&gt;&lt;pre class=&quot;language-haskell&quot;&gt;&lt;code class=&quot;language-haskell&quot;&gt;&lt;span class=&quot;token hvariable&quot;&gt;prop&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Arbitrary&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Result&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;IO&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Result&lt;/span&gt;
&lt;span class=&quot;token hvariable&quot;&gt;prop&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;token hvariable&quot;&gt;someAs&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;sample&lt;/span&gt;
  &lt;span class=&quot;token hvariable&quot;&gt;pure&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;mconcat&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;$&gt;&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;someAs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;do&lt;/code&gt; takes us into something that looks a little imperative ‚Äî you can read each line as ‚Äúthis, then
that, then the other thing,‚Äù similar to languages like Python and JavaScript.
The first line says ‚Äúget me the list of &lt;code class=&quot;language-text&quot;&gt;a&lt;/code&gt;-s that you promised,‚Äù and the second says ‚Äútest them all,
smash the results together, and give me the result.‚Äù The &lt;code class=&quot;language-text&quot;&gt;pure $&lt;/code&gt; at the beginning is just there to
make the types cooperate.&lt;/p&gt;
&lt;p&gt;Similarly, for functions of two parameters where we know how to generate values of both types, we can implement
&lt;code class=&quot;language-text&quot;&gt;prop2&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;haskell&quot;&gt;&lt;pre class=&quot;language-haskell&quot;&gt;&lt;code class=&quot;language-haskell&quot;&gt;&lt;span class=&quot;token hvariable&quot;&gt;prop2&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;Arbitrary&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Arbitrary&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Result&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;IO&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Result&lt;/span&gt;
&lt;span class=&quot;token hvariable&quot;&gt;prop2&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;token hvariable&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;sample&lt;/span&gt;
    &lt;span class=&quot;token hvariable&quot;&gt;bs&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;sample&lt;/span&gt;
    &lt;span class=&quot;token hvariable&quot;&gt;pure&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;fold&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;zipWith&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;bs&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;How high can we go with this? All the way to infinity! &lt;code class=&quot;language-text&quot;&gt;tiny-test&lt;/code&gt; stops at &lt;code class=&quot;language-text&quot;&gt;prop3&lt;/code&gt; because that‚Äôs not the point of &lt;code class=&quot;language-text&quot;&gt;tiny-test&lt;/code&gt;.
&lt;em&gt;Real&lt;/em&gt; property testing libraries don‚Äôt have this kind of limit or require you to count arguments on your own. For example,
the &lt;a href=&quot;https://www.scalacheck.org/#quickstart&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;ScalaCheck&lt;/code&gt; quickstart&lt;/a&gt; shows that the &lt;code class=&quot;language-text&quot;&gt;forAll&lt;/code&gt; method, which is like &lt;code class=&quot;language-text&quot;&gt;prop&lt;/code&gt; above, can take functions of different
numbers of parameters.&lt;/p&gt;
&lt;h2&gt;Using &lt;code class=&quot;language-text&quot;&gt;tiny-test&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;You can use &lt;code class=&quot;language-text&quot;&gt;tiny-test&lt;/code&gt; in the &lt;code class=&quot;language-text&quot;&gt;tiny-test&lt;/code&gt; test suite. To run the test suite, you‚Äôll need &lt;code class=&quot;language-text&quot;&gt;stack&lt;/code&gt;. If you clone the repo and
run &lt;code class=&quot;language-text&quot;&gt;stack test&lt;/code&gt;, you‚Äôll see:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;Running test suite addition unit tests
Success!&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you then apply a small diff to the &lt;code class=&quot;language-text&quot;&gt;Spec.hs&lt;/code&gt; file and rerun‚Ä¶&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;diff&quot;&gt;&lt;pre class=&quot;language-diff&quot;&gt;&lt;code class=&quot;language-diff&quot;&gt;diff --git a/test/Spec.hs b/test/Spec.hs
index a114364..b776925 100644
&lt;span class=&quot;token coord&quot;&gt;--- a/test/Spec.hs&lt;/span&gt;
&lt;span class=&quot;token coord&quot;&gt;+++ b/test/Spec.hs&lt;/span&gt;
@@ -10,8 +10,8 @@ import TestSuite (TestSuite (..), runTests)
&lt;span class=&quot;token unchanged&quot;&gt;&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;main :: IO ()
&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;main = do
&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;  addUnitExit &amp;lt;- runTestSuite addUnitSuite
&lt;/span&gt;&lt;span class=&quot;token deleted-sign deleted&quot;&gt;&lt;span class=&quot;token prefix deleted&quot;&gt;-&lt;/span&gt;  -- addPropExit &amp;lt;- addPropSuite &gt;&gt;= runTestSuite
&lt;span class=&quot;token prefix deleted&quot;&gt;-&lt;/span&gt;  exitWith addUnitExit
&lt;/span&gt;&lt;span class=&quot;token inserted-sign inserted&quot;&gt;&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;  addPropExit &amp;lt;- addPropSuite &gt;&gt;= runTestSuite
&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;  exitWith $ addUnitExit `max` addPropExit
&lt;/span&gt;&lt;span class=&quot;token unchanged&quot;&gt;&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;
&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;runTestSuite :: TestSuite -&gt; IO ExitCode
&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;runTestSuite testSuite =
&lt;/span&gt;@@ -42,12 +42,12 @@ addUnitSuite =
&lt;span class=&quot;token unchanged&quot;&gt;&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;        ]
&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;    }
&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;
&lt;/span&gt;&lt;span class=&quot;token coord&quot;&gt;--- addPropSuite :: IO TestSuite&lt;/span&gt;
&lt;span class=&quot;token coord&quot;&gt;--- addPropSuite =&lt;/span&gt;
&lt;span class=&quot;token coord&quot;&gt;---   do&lt;/span&gt;
&lt;span class=&quot;token coord&quot;&gt;---     result &amp;lt;- Result.fromProp2 (\x y -&gt; add x y `shouldBe` (x + y))&lt;/span&gt;
&lt;span class=&quot;token coord&quot;&gt;---     pure $&lt;/span&gt;
&lt;span class=&quot;token coord&quot;&gt;---       NamedTestSuite&lt;/span&gt;
&lt;span class=&quot;token coord&quot;&gt;---         { suiteName = &quot;addition prop tests&quot;,&lt;/span&gt;
&lt;span class=&quot;token coord&quot;&gt;---           suite = [result]&lt;/span&gt;
&lt;span class=&quot;token coord&quot;&gt;---         }&lt;/span&gt;
\ No newline at end of file
&lt;span class=&quot;token inserted-sign inserted&quot;&gt;&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;addPropSuite :: IO TestSuite
&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;addPropSuite =
&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;  do
&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;    result &amp;lt;- Result.fromProp2 (\x y -&gt; add x y `shouldBe` (x + y))
&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;    pure $
&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;      NamedTestSuite
&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;        { suiteName = &quot;addition prop tests&quot;,
&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;          suite = [result]
&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;        }&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You‚Äôll see a nice collection of failures:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;Running test suite addition prop tests
15 was not equal to 16. Input: (13,3)
69 was not equal to 70. Input: (13,57)
34 was not equal to 35. Input: (0,35)
101 was not equal to 102. Input: (26,76)
138 was not equal to 139. Input: (91,48)
76 was not equal to 77. Input: (13,64)
23 was not equal to 24. Input: (13,11)
80 was not equal to 81. Input: (0,81)
103 was not equal to 104. Input: (13,91)
144 was not equal to 145. Input: (78,67)
146 was not equal to 147. Input: (52,95)
94 was not equal to 95. Input: (26,69)
102 was not equal to 103. Input: (52,51)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you‚Äôre quick with dividing things by 13, you might be suspicious already about how
this function was implemented, and of course the implementation in &lt;code class=&quot;language-text&quot;&gt;tiny-test&lt;/code&gt;
looks like this:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;haskell&quot;&gt;&lt;pre class=&quot;language-haskell&quot;&gt;&lt;code class=&quot;language-haskell&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;-- |&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;-- add two numbers&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;-- but do a bad enough job that property tests show something interesting&lt;/span&gt;
&lt;span class=&quot;token hvariable&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Int&lt;/span&gt;
&lt;span class=&quot;token hvariable&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;mod&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;13&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;then&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;y&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you want to play around with other function types, it‚Äôs easy to add new arbitrary
instances. For example, if you wanted to generate instances of a type &lt;code class=&quot;language-text&quot;&gt;Foo&lt;/code&gt; with a &lt;code class=&quot;language-text&quot;&gt;num&lt;/code&gt; field
that‚Äôs an &lt;code class=&quot;language-text&quot;&gt;Int&lt;/code&gt; and a &lt;code class=&quot;language-text&quot;&gt;ch&lt;/code&gt; field that‚Äôs a &lt;code class=&quot;language-text&quot;&gt;Char&lt;/code&gt;, you could apply the following diff:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;diff&quot;&gt;&lt;pre class=&quot;language-diff&quot;&gt;&lt;code class=&quot;language-diff&quot;&gt;diff --git a/src/Arbitrary.hs b/src/Arbitrary.hs
index 66405b3..17cb6d2 100644
&lt;span class=&quot;token coord&quot;&gt;--- a/src/Arbitrary.hs&lt;/span&gt;
&lt;span class=&quot;token coord&quot;&gt;+++ b/src/Arbitrary.hs&lt;/span&gt;
@@ -10,4 +10,12 @@ class Arbitrary a where
&lt;span class=&quot;token unchanged&quot;&gt;&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;  sample :: IO [a]
&lt;/span&gt;
&lt;span class=&quot;token unchanged&quot;&gt;&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;instance Arbitrary Int where
&lt;/span&gt;&lt;span class=&quot;token deleted-sign deleted&quot;&gt;&lt;span class=&quot;token prefix deleted&quot;&gt;-&lt;/span&gt;  sample = replicateM 100 ((flip mod) 100 &amp;lt;$&gt; randomIO)
&lt;/span&gt;\ No newline at end of file
&lt;span class=&quot;token inserted-sign inserted&quot;&gt;&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;  sample = replicateM 100 ((flip mod) 100 &amp;lt;$&gt; randomIO)
&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;
&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;data Foo = Foo { num :: Int, ch :: Char }
&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;
&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;instance Arbitrary Foo where
&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;  sample = replicateM 100 $ do
&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;    num &amp;lt;- randomIO
&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;    ch &amp;lt;- randomIO
&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;    pure $ Foo num ch&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;and test what ever functions over &lt;code class=&quot;language-text&quot;&gt;Foos&lt;/code&gt; you can imagine.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Getting started with STAC APIs]]></title><description><![CDATA[STAC is a specification for ‚Äúenabling online search and discovery of geospatial assets.‚Äù
Right now, a lot of work has gone into the core‚Ä¶]]></description><link>https://jisantuc.github.io/Getting-started-with-STAC-APIs/Getting-started-with-STAC-APIs/</link><guid isPermaLink="false">https://jisantuc.github.io/Getting-started-with-STAC-APIs/Getting-started-with-STAC-APIs/</guid><pubDate>Tue, 23 Mar 2021 21:26:42 GMT</pubDate><content:encoded>&lt;p&gt;&lt;a href=&quot;https://stacspec.org/&quot;&gt;STAC&lt;/a&gt; is a specification for ‚Äúenabling online search and discovery of geospatial assets.‚Äù
Right now, a lot of work has gone into the core specification, with a 1.0.0-rc1 for the
core specification released 20 days ago. Following the core spec‚Äôs 1.0.0 release, more
work will go into the API spec.&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://stacspec.org/images/logo/STAC-04.png&quot; width=&quot;200/&quot;&gt;&lt;/center&gt;
&lt;p&gt;The tooling story on the way to standing up a STAC API is pretty well ironed out. If you want to create
a catalog that follows all the rules in the pretty sizable
&lt;a href=&quot;https://github.com/radiantearth/stac-spec/blob/master/best-practices.md&quot;&gt;best practices doc&lt;/a&gt;, use &lt;a href=&quot;https://github.com/stac-utils/pystac&quot;&gt; &lt;code class=&quot;language-text&quot;&gt;PySTAC&lt;/code&gt; &lt;/a&gt;. If you just want a typed STAC datamodel for building
applications on top of STAC, use [ &lt;code class=&quot;language-text&quot;&gt;stac-pydantic&lt;/code&gt; ] or [ &lt;code class=&quot;language-text&quot;&gt;stac4s&lt;/code&gt; ]. They‚Äôre both dogfooded
in STAC API implementations, &lt;code class=&quot;language-text&quot;&gt;stac-pydantic&lt;/code&gt; in &lt;a href=&quot;https://github.com/stac-utils/arturo-stac-api&quot;&gt; &lt;code class=&quot;language-text&quot;&gt;arturo-stac-api&lt;/code&gt; &lt;/a&gt; and &lt;code class=&quot;language-text&quot;&gt;stac4s&lt;/code&gt; in &lt;a href=&quot;https://azavea.github.io/franklin/&quot;&gt; &lt;code class=&quot;language-text&quot;&gt;Franklin&lt;/code&gt; &lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;One area where tools are lacking is clients. Most clients in &lt;a href=&quot;https://stacindex.org/ecosystem?category=Client&quot;&gt;stacindex.org&lt;/a&gt; are either libraries
that require you to write code or full on frontend applications. An exception to this
is &lt;a href=&quot;https://github.com/sat-utils/sat-search&quot;&gt; &lt;code class=&quot;language-text&quot;&gt;sat-search&lt;/code&gt; &lt;/a&gt; , which is a CLI tool.
To support a more interactive browsing adventure, I wrote &lt;a href=&quot;https://github.com/jisantuc/stac-repl&quot;&gt; &lt;code class=&quot;language-text&quot;&gt;stac-repl&lt;/code&gt; &lt;/a&gt;, which is built on top
of a PureScript client I wrote called &lt;a href=&quot;https://github.com/jisantuc/purescript-stac&quot;&gt; &lt;code class=&quot;language-text&quot;&gt;purescript-stac&lt;/code&gt; &lt;/a&gt;.
I completed both of these as part of 10% time work at &lt;a href=&quot;https://www.azavea.com/&quot;&gt;Azavea&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The goal of &lt;code class=&quot;language-text&quot;&gt;stac-repl&lt;/code&gt; is to provide an interactive, ipython-ish experience around browsing
STAC APIs. You can run it with &lt;code class=&quot;language-text&quot;&gt;node&lt;/code&gt; by downloading the bundled js file from the &lt;a href=&quot;https://github.com/jisantuc/stac-repl/releases/tag/v0.1.1&quot;&gt;v0.1.1 release&lt;/a&gt; or
in a container with &lt;code class=&quot;language-text&quot;&gt;docker run jisantuc/stac-repl:0.1.1&lt;/code&gt; .&lt;/p&gt;
&lt;p&gt;You should be able to figure out everything you can do by mashing the &lt;code class=&quot;language-text&quot;&gt;&amp;lt;TAB&gt;&lt;/code&gt; key. For example,
when you start up &lt;code class=&quot;language-text&quot;&gt;stac-repl&lt;/code&gt; , you only get one completion:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;stac &gt; &amp;lt;TAB&gt;
stac &gt; set root url&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;For this example, I‚Äôll point the root to a catalog of &lt;a href=&quot;https://aviris.jpl.nasa.gov/&quot;&gt;AVIRIS&lt;/a&gt; data that can be found
at &lt;code class=&quot;language-text&quot;&gt;https://franklin.nasa-hsi.azavea.com&lt;/code&gt; . Tabbing from there,
commands get a little more interesting:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;stac &gt; set root url https://franklin.nasa-hsi.azavea.com
stac https://franklin.nasa-hsi.azavea.com &gt; &amp;lt;TAB&gt;
set root url      get conformance   set collection    list collections&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now that we know where the catalog root is, we can check its conformance information, list collections,
or pick a specific collection. We don‚Äôt know any collections yet, so let‚Äôs list some (naturally, by typing
just an &lt;code class=&quot;language-text&quot;&gt;li&lt;/code&gt; and a &lt;code class=&quot;language-text&quot;&gt;&amp;lt;TAB&gt;&lt;/code&gt; ):&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;stac https://franklin.nasa-hsi.azavea.com &gt; list collections
aviris-classic: AVIRIS is an acronym for the Airborne Visible InfraRed Imaging Spectrometer. AVIRIS is a premier instrument in the realm of Earth Remote Sensing. It is a unique optical sensor that delivers calibrated images of the upwelling spectral radiance in 224 contiguous spectral channels (also called bands) with wavelengths from 400 to 2500 nanometers (nm). AVIRIS has been flown on four aircraft platforms: NASA&apos;s ER-2 jet, Twin Otter International&apos;s turboprop, Scaled Composites&apos; Proteus, and NASA&apos;s WB-57. The ER-2 flies at approximately 20 km above sea level, at about 730 km/hr. The Twin Otter aircraft flies at 4km above ground level at 130km/hr. AVIRIS has flown all across the US, plus Canada and Europe. This catalog contains all AVIRIS missions from 2006 - 2019.

aviris-ng: AVIRIS is an acronym for the Airborne Visible InfraRed Imaging Spectrometer. AVIRIS is a premier instrument in the realm of Earth Remote Sensing. It is a unique optical sensor that delivers calibrated images of the upwelling spectral radiance in 224 contiguous spectral channels (also called bands) with wavelengths from 400 to 2500 nanometers (nm). AVIRIS has been flown on four aircraft platforms: NASA&apos;s ER-2 jet, Twin Otter International&apos;s turboprop, Scaled Composites&apos; Proteus, and NASA&apos;s WB-57. The ER-2 flies at approximately 20 km above sea level, at about 730 km/hr. The Twin Otter aircraft flies at 4km above ground level at 130km/hr. AVIRIS has flown all across the US, plus Canada and Europe. This catalog contains all AVIRIS missions from 2006 - 2019.

aviris-l2-cogs: AVIRIS L2 Refl Imagery converted to pixel-interleaved COGs

aviris-l2-chips: A STAC Collection containing COGs created by the nasa-hsi cog-clip activator&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;When you list collections, &lt;code class=&quot;language-text&quot;&gt;stac-repl&lt;/code&gt; remembers their ids, so when you want
to pick a collection you can also get tab completions. For example, since all of these collection IDs start with
&lt;code class=&quot;language-text&quot;&gt;aviris&lt;/code&gt; , &lt;code class=&quot;language-text&quot;&gt;set collection a&amp;lt;TAB&gt;&amp;lt;TAB&gt;&lt;/code&gt; completes to:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;stac https://franklin.nasa-hsi.azavea.com &gt; set collection aviris-
set collection aviris-classic   set collection aviris-l2-chips  set collection aviris-l2-cogs   set collection aviris-ng&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I‚Äôll pick &lt;code class=&quot;language-text&quot;&gt;aviris-ng&lt;/code&gt; .&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;stac https://franklin.nasa-hsi.azavea.com &gt; set collection aviris-ng
Set context to collection aviris-ng&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now that I‚Äôm in a different context, the available commands are different:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;stac https://franklin.nasa-hsi.azavea.com &gt; &amp;lt;TAB&gt;
view               unset collection   locate collection  get conformance    list items         next page          locate item&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Here, the new commands are &lt;code class=&quot;language-text&quot;&gt;view&lt;/code&gt; , &lt;code class=&quot;language-text&quot;&gt;unset collection&lt;/code&gt; , &lt;code class=&quot;language-text&quot;&gt;list items&lt;/code&gt; , &lt;code class=&quot;language-text&quot;&gt;next page&lt;/code&gt; , and &lt;code class=&quot;language-text&quot;&gt;locate item&lt;/code&gt; . Let‚Äôs see what items are available:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;stac https://franklin.nasa-hsi.azavea.com &gt; list items
...
Id: &quot;aviris_ang20140605t182232&quot;
Extensions: []
Bbox: [-122.73583300000001,38.558091,-122.676149,38.632746999999995]
Assets:
ftp: ftp://avng_dp:P73axIvP@avng.jpl.nasa.gov/y14_data/ang20140605t182232.tar.gz ((VendorMediaType &quot;application/gzip&quot;))
rgb: http://avirisng.jpl.nasa.gov/aviris_locator/y14_RGB/ang20140605t182232_RGB.jpeg (JPEG)
kml_overlay: http://avirisng.jpl.nasa.gov/aviris_locator/y14_KML/ang20140605t182232_overlay_KML.kml ((VendorMediaType &quot;application/vnd.google-earth.kml+xml&quot;))
rgb_small: http://avirisng.jpl.nasa.gov/aviris_locator/y14_RGB/ang20140605t182232_RGB-W200.jpg (JPEG)
flight_log: http://avirisng.jpl.nasa.gov/cgi/flights_14.cgi?step=view_flightlog&amp;amp;flight_id=ang20140605t (HTML)
kml_outline: http://avirisng.jpl.nasa.gov/aviris_locator/y14_KML/ang20140605t182232_outline_KML.kml ((VendorMediaType &quot;application/vnd.google-earth.kml+xml&quot;))&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The API returns them 30 at a time, but I‚Äôm only showing the last one on the first page to avoid a huge wall of text.
Similarly to listing collections, &lt;code class=&quot;language-text&quot;&gt;stac-repl&lt;/code&gt; remembers item IDs so that we can tab complete them for item-specific
commands.&lt;/p&gt;
&lt;p&gt;In this case, the only item-specific command is &lt;code class=&quot;language-text&quot;&gt;locate item&lt;/code&gt; , so tabbing after that, we can eventually get to&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;stac https://franklin.nasa-hsi.azavea.com &gt; locate item aviris_ang20140605t182232&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This gets us a delightful &lt;a href=&quot;https://github.com/rastapasta/mapscii/&quot;&gt;Mapscii&lt;/a&gt; map.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/6b01c5f0da9df8e0f34e48d091301dae/c483d/mapscii-map.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 87.9746835443038%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABzklEQVQ4y41T23LTQAzVfbVXxwlOC3kCfqEpNFD4/79i1nbiMtDCjh+0Hp2jI+ksCCP88yCqCdGaySIA+Hw5g5so03/A0ZSXmKjnX74+QEmmymaM+KoENVFjYZK5zJLZwR5EpVOaMr8ioY1xPBaPSjNsA5dkQ3VVCcqqzLRy87VDRBiP5f7j/tPnaRjiLPsKDso1O8BaU4WtdyFzIAsFErYpnU7D8ViJaaucoup1EssRYVzrdy5hXrSIMAvlFmTOvzw9wLsc72pWpBeDZXxxNV2XFEwRIFUPriv4kPy0q9Xt7SWpEDMF17zzTTYRimrJ4W2vEOHg4ZDjvka4gYUx5n1r1QN3xfL3bZlxVNlF36fo3vVfns6AAKoixPviZhrSpp+JVPj2rV0QmgoA/Pj+2MEWPHo+1TzVfG20r7CPCjGYeJD5H+B1CgDw8/kLEEJrDciC8f1USzTPtptKToZrfZTfe9nAplzaRGTCaCZD9ZxNjIPJYvZuFIQ/wbPDTG72QoAc7e5QgrL7ah5hujXchTAtT6CDuxn7GnkJmKikEIPEFHMK1MezlWahw4fWxrSaZKFHhGAcZpYULbmOLSKiG8cgN7C5HN7XMj+Pb5fzL2snGligmoGnAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;mapscii map&quot;
        title=&quot;mapscii map&quot;
        src=&quot;/static/6b01c5f0da9df8e0f34e48d091301dae/f058b/mapscii-map.png&quot;
        srcset=&quot;/static/6b01c5f0da9df8e0f34e48d091301dae/c26ae/mapscii-map.png 158w,
/static/6b01c5f0da9df8e0f34e48d091301dae/6bdcf/mapscii-map.png 315w,
/static/6b01c5f0da9df8e0f34e48d091301dae/f058b/mapscii-map.png 630w,
/static/6b01c5f0da9df8e0f34e48d091301dae/c483d/mapscii-map.png 751w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;This first release of &lt;code class=&quot;language-text&quot;&gt;stac-repl&lt;/code&gt; covers only the most basic interactions, but I‚Äôm looking forward to building
out support for more features like &lt;a href=&quot;https://github.com/radiantearth/stac-api-spec/tree/v1.0.0-beta.1/item-search&quot;&gt;search&lt;/a&gt; and &lt;a href=&quot;https://github.com/radiantearth/stac-api-spec/tree/v1.0.0-beta.1/ogcapi-features/extensions/transaction&quot;&gt;transactions&lt;/a&gt;.&lt;/p&gt;</content:encoded></item></channel></rss>